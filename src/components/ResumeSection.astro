---
import resumeData from '../data/resume.json';

const base = (import.meta.env.BASE_URL || '/').replace(/\/?$/, '/');
const resumePdfHref = `${base}resume.pdf`;

const SKILL_CATEGORY_LABELS: Record<string, string> = {
  programmingLanguages: 'Programming Languages',
  aiMl: 'AI and ML',
  softwareDevelopment: 'Software Development',
  databases: 'Databases and Data Engineering',
  devOps: 'DevOps and Cloud Infrastructure',
  cybersecurity: 'Cybersecurity',
  coreCs: 'Core Computer Science',
};
---

<section id="resume" class="px-4 py-8 md:px-6 md:py-12 lg:px-8">
  <div class="max-w-6xl mx-auto flex flex-col items-center space-y-6">
    <header class="text-center w-full">
      <div class="w-16 h-1 bg-blue-600 rounded-full mx-auto mb-4" aria-hidden="true"></div>
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-medium tracking-tight">Resume</h1>
      <p class="text-muted-foreground mt-2">Professional Experience & Qualifications</p>
      <a
        href={resumePdfHref}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-block mt-3 text-blue-600 underline hover:no-underline transition-[text-decoration] duration-200 dark:text-blue-400"
      >
        PDF ↗
      </a>
    </header>

    <article
      class="w-full bg-background border-4 border-black dark:border-white rounded-3xl p-6 md:p-8 shadow-lg"
      aria-labelledby="experience-heading"
    >
      <div class="flex items-center gap-3 mb-6" id="experience-heading">
        <div class="p-2 bg-blue-600 rounded-lg shrink-0" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
        </div>
        <h2 class="text-2xl md:text-3xl font-medium">Experience</h2>
      </div>
      <ul class="space-y-6">
        {resumeData.experience.map((job) => (
          <li>
            <div class="border-2 border-black dark:border-white rounded-2xl p-6 transition-colors duration-300 hover:border-blue-600 dark:hover:border-blue-500">
              <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-1 mb-2">
                <div>
                  <h3 class="text-lg font-bold">
                    {job.url ? (
                      <a href={job.url} target="_blank" rel="noopener noreferrer" class="text-inherit no-underline hover:no-underline">{job.company}</a>
                    ) : (
                      job.company
                    )}
                  </h3>
                  <p class="text-blue-600 dark:text-blue-400">{job.title}</p>
                </div>
                <span class="text-muted-foreground text-sm shrink-0">{job.period}</span>
              </div>
              {job.location && <p class="text-muted-foreground text-sm mb-3">{job.location}</p>}
              <ul class="space-y-2 list-none">
                {job.achievements.map((item) => (
                  <li class="flex gap-2 leading-relaxed">
                    <span class="text-blue-600 dark:text-blue-400 mt-1.5 shrink-0">•</span>
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            </div>
          </li>
        ))}
      </ul>
    </article>

    <article
      class="w-full bg-background border-4 border-black dark:border-white rounded-3xl p-6 md:p-8 shadow-lg"
      aria-labelledby="education-heading"
    >
      <div class="flex items-center gap-3 mb-6" id="education-heading">
        <div class="p-2 bg-blue-600 rounded-lg shrink-0" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z" />
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
          </svg>
        </div>
        <h2 class="text-2xl md:text-3xl font-medium">Education</h2>
      </div>
      <ul class="space-y-6">
        {resumeData.education.map((entry) => (
          <li>
            <div class="border-2 border-black dark:border-white rounded-2xl p-6 transition-colors duration-300 hover:border-blue-600 dark:hover:border-blue-500">
              <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-1">
                <div>
                  <h3 class="text-lg font-bold">
                    {entry.url ? (
                      <a href={entry.url} target="_blank" rel="noopener noreferrer" class="text-inherit no-underline hover:no-underline">{entry.institution}</a>
                    ) : (
                      entry.institution
                    )}
                  </h3>
                  <p class="text-blue-600 dark:text-blue-400">{entry.degree}</p>
                </div>
                <span class="text-muted-foreground text-sm shrink-0">{entry.period}</span>
              </div>
              {entry.location && <p class="text-muted-foreground text-sm mt-2">{entry.location}</p>}
            </div>
          </li>
        ))}
      </ul>
    </article>

    <article
      class="w-full bg-background border-4 border-black dark:border-white rounded-3xl p-6 md:p-8 shadow-lg"
      aria-labelledby="projects-heading"
    >
      <div class="flex items-center gap-3 mb-6" id="projects-heading">
        <div class="p-2 bg-blue-600 rounded-lg shrink-0" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
          </svg>
        </div>
        <h2 class="text-2xl md:text-3xl font-medium">Projects / Contributions</h2>
      </div>
      <ul class="space-y-6">
        {resumeData.projects.map((project) => (
          <li>
            <div class="border-2 border-black dark:border-white rounded-2xl p-6 transition-colors duration-300 hover:border-blue-600 dark:hover:border-blue-500">
              <div class="flex flex-row items-start justify-between gap-3">
                <div class="min-w-0 flex-1">
                  <h3 class="text-lg font-bold">
                    {project.githubUrl ? (
                      <a href={project.githubUrl} target="_blank" rel="noopener noreferrer" class="text-inherit no-underline hover:no-underline">{project.title}</a>
                    ) : (
                      project.title
                    )}
                  </h3>
                  {project.technologies && (
                    <p class="text-blue-600 dark:text-blue-400 text-sm mt-1">{project.technologies}</p>
                  )}
                </div>
                {project.githubUrl && (
                  <a
                    href={project.githubUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="shrink-0 p-2 rounded-lg border border-foreground hover:bg-blue-600 hover:border-blue-600 hover:text-white transition-colors duration-200"
                    aria-label={`View ${project.title} on GitHub`}
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4" />
                      <path d="M9 18c-4.51 2-5-2-7-2" />
                    </svg>
                  </a>
                )}
              </div>
              <ul class="space-y-2 list-none mt-3">
                {project.achievements.map((item) => (
                  <li class="flex gap-2 leading-relaxed">
                    <span class="text-blue-600 dark:text-blue-400 mt-1.5 shrink-0">•</span>
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            </div>
          </li>
        ))}
      </ul>
    </article>

    <article
      class="w-full bg-background border-4 border-black dark:border-white rounded-3xl p-6 md:p-8 shadow-lg"
      aria-labelledby="skills-heading"
    >
      <div class="flex items-center gap-3 mb-6" id="skills-heading">
        <div class="p-2 bg-blue-600 rounded-lg shrink-0" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
          </svg>
        </div>
        <h2 class="text-2xl md:text-3xl font-medium">Technical Skills</h2>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {Object.entries(resumeData.skills).map(([key, skills]) => (
          <div class="border-2 border-black dark:border-white rounded-2xl p-5">
            <h3 class="text-lg font-medium mb-3">{SKILL_CATEGORY_LABELS[key] ?? key}</h3>
            <div class="flex flex-wrap gap-2">
              {skills.map((skill) => (
                <span class="rounded-full px-3 py-1 text-sm border-2 border-black dark:border-white">
                  {skill}
                </span>
              ))}
            </div>
          </div>
        ))}
      </div>
    </article>

    {resumeData.certifications && resumeData.certifications.length > 0 && (
      <article
        class="w-full bg-background border-4 border-black dark:border-white rounded-3xl p-6 md:p-8 shadow-lg"
        aria-labelledby="certifications-heading"
      >
        <div class="flex items-center gap-3 mb-6" id="certifications-heading">
          <div class="p-2 bg-blue-600 rounded-lg shrink-0" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.439 3.439 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.439 3.439 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.439-3.439 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.439-3.439z" />
            </svg>
          </div>
          <h2 class="text-2xl md:text-3xl font-medium">Certifications</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
          {(resumeData.certifications as { name: string; issuer: string; date: string }[]).map((cert) => (
            <div class="border-2 border-black dark:border-white rounded-2xl p-6 transition-colors duration-300 hover:border-blue-600 dark:hover:border-blue-500">
              <h3 class="text-lg font-bold">{cert.name}</h3>
              <p class="text-muted-foreground text-sm">{cert.issuer}</p>
              <p class="text-blue-600 dark:text-blue-400 text-sm mt-1">{cert.date}</p>
            </div>
          ))}
        </div>
      </article>
    )}
  </div>
</section>
